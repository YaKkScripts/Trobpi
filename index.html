<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Balling.com</title>
    <style>
        :root { --cyan: #00e5ff; --white: #ffffff; --gray: #f0f2f5; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background-color: var(--gray); overflow: hidden; height: 100vh; }
        .hidden { display: none !important; }

        /* Navigation */
        nav { background: var(--white); height: 70px; display: flex; align-items: center; padding: 0 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: relative; }
        #brand { position: absolute; left: 50%; transform: translateX(-50%); color: var(--cyan); font-size: 28px; font-weight: bold; }
        .nav-left { display: flex; gap: 10px; }

        /* UI Elements */
        button { cursor: pointer; border: none; border-radius: 5px; padding: 10px 15px; font-weight: bold; transition: 0.2s; }
        .btn-cyan { background: var(--cyan); color: white; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        
        #notif { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); padding: 15px 30px; border-radius: 8px; color: white; font-weight: bold; z-index: 9999; display: none; }

        /* Screens */
        .screen { display: none; padding: 20px; height: calc(100vh - 70px); box-sizing: border-box; }
        .active { display: block; }
        .flex-active { display: flex; flex-direction: column; justify-content: center; align-items: center; }

        /* Layout */
        .frame { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); width: 340px; text-align: center; }
        .app-layout { display: grid; grid-template-columns: 300px 1fr; gap: 20px; height: 75%; margin-top: 20px; }
        .sidebar { background: white; border-radius: 10px; padding: 20px; overflow-y: auto; }
        .main-space { background: white; border-radius: 10px; padding: 20px; display: flex; flex-direction: column; }

        /* Contacts */
        .contact-entry { width: 100%; background: #f9f9f9; border: 1px solid #eee; margin-bottom: 10px; padding: 10px; border-radius: 5px; }
        .contact-btn-wide { width: 100%; background: var(--cyan); color: white; text-align: left; padding: 15px; font-size: 16px; border-radius: 5px; }

        /* Chat */
        #global-chat-box { flex-grow: 1; background: #f8f9fa; border: 1px solid #ddd; border-radius: 5px; padding: 10px; overflow-y: auto; margin-bottom: 10px; }
        .msg { margin-bottom: 8px; border-bottom: 1px solid #eee; padding-bottom: 4px; }

        /* Bottom Menu */
        .bottom-menu { position: fixed; bottom: 20px; left: 20px; display: flex; gap: 15px; }
        .icon-btn { background: white; padding: 10px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); text-align: center; width: 80px; }
        .icon-btn img { width: 30px; display: block; margin: 0 auto; }
    </style>
</head>
<body>

    <div id="notif"></div>

    <nav>
        <div class="nav-left" id="auth-nav">
            <button class="btn-cyan" onclick="openScreen('signup-screen')">Get Started</button>
            <button onclick="openScreen('login-screen')">Sign In</button>
        </div>
        <div class="nav-left hidden" id="user-nav">
            <button class="btn-cyan" id="my-num-btn" onclick="logout()"></button>
        </div>
        <div id="brand">Balling.com</div>
    </nav>

    <div id="start-screen" class="screen active flex-active">
        <input type="text" readonly value="Where you can find your number, to another number." style="width: 400px; text-align: center; border: 2px dashed var(--cyan); background: #f0faff; margin-bottom: 20px;">
        <h1 style="color: var(--cyan);">Welcome to Balling.com</h1>
        <p>Press "Get Started" to generate your global number.</p>
    </div>

    <div id="signup-screen" class="screen flex-active">
        <div class="frame">
            <h3>Register Account</h3>
            <input type="text" id="reg-user" placeholder="Username" maxlength="19">
            <input type="password" id="reg-pass" placeholder="Password">
            <button class="btn-cyan" onclick="generatePhone()">Get Number</button>
            <p id="reg-num-display" style="font-weight: bold; color: var(--cyan); margin: 10px 0;"></p>
            <button id="start-app-btn" class="btn-cyan hidden" style="width:100%" onclick="finishSignup()">Start</button>
            <button onclick="openScreen('start-screen')" style="background:none; color: gray;">Leave</button>
        </div>
    </div>

    <div id="login-screen" class="screen flex-active">
        <div class="frame">
            <h3>Sign In</h3>
            <input type="text" id="log-user" placeholder="Username">
            <input type="password" id="log-pass" placeholder="Password">
            <button class="btn-cyan" style="width:100%" onclick="login()">Login</button>
            <button onclick="openScreen('start-screen')" style="background:none; color: gray;">Leave</button>
        </div>
    </div>

    <div id="app-screen" class="screen">
        <h2 style="text-align: center;">Hello, Welcome.</h2>
        <div class="app-layout">
            <div class="sidebar">
                <h4>Contact</h4>
                <div id="contacts-list">
                    <p id="empty-msg" style="text-align: center; color: #999;">You Don't Have Any Contacts!</p>
                </div>
            </div>
            <div class="main-space">
                <h4 style="margin:0 0 10px 0;">Online Community (Cloud Chat)</h4>
                <div id="global-chat-box"></div>
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="chat-msg" placeholder="Talk online with other people...">
                    <button class="btn-cyan" onclick="sendGlobal()">Send</button>
                </div>
            </div>
        </div>

        <div class="bottom-menu">
            <div class="icon-btn" onclick="openScreen('app-screen')">
                <img src="https://cdn-icons-png.flaticon.com/512/3722/3722900.png">
                <small>Contacts</small>
            </div>
            <div class="icon-btn" onclick="showAddPopup()">
                <img src="https://cdn-icons-png.flaticon.com/512/3616/3616215.png">
                <small>Phone Number</small>
            </div>
        </div>
    </div>

    <div id="overlay" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:9000; display:none; justify-content:center; align-items:center;">
        <div id="add-pop" class="frame">
            <h3>Add Contact</h3>
            <input type="text" id="add-phone" placeholder="(123) 456-789">
            <button class="btn-cyan" onclick="addContact()">Save Contact</button>
            <button onclick="closePop()" style="background:none; color:gray;">Leave</button>
        </div>
    </div>

    <script>
        // DATA SYNC LOGIC (Cloud Simulation)
        let ballingData = JSON.parse(localStorage.getItem('balling_cloud')) || { users: [], messages: [] };
        let activeUser = null;
        let tempPhone = "";

        function saveCloud() {
            localStorage.setItem('balling_cloud', JSON.stringify(ballingData));
        }

        function openScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active', 'flex-active'));
            const target = document.getElementById(id);
            if (id === 'app-screen') target.classList.add('active');
            else target.classList.add('flex-active');
        }

        function notify(text, color) {
            const n = document.getElementById('notif');
            n.innerText = text; n.style.backgroundColor = color;
            n.style.display = 'block';
            setTimeout(() => n.style.display = 'none', 3000);
        }

        function generatePhone() {
            const r = (n) => Math.floor(Math.random() * n);
            tempPhone = `(${r(900)+100}) ${r(900)+100}-${r(9000)+1000}`;
            document.getElementById('reg-num-display').innerText = tempPhone;
            document.getElementById('start-app-btn').classList.remove('hidden');
        }

        function finishSignup() {
            const u = document.getElementById('reg-user').value;
            const p = document.getElementById('reg-pass').value;
            if(!u || u.length >= 20) return alert("Invalid Username");
            
            const user = { username: u, password: p, phone: tempPhone, contacts: [] };
            ballingData.users.push(user);
            saveCloud();
            loadSession(user);
        }

        function login() {
            const u = document.getElementById('log-user').value;
            const p = document.getElementById('log-pass').value;
            const found = ballingData.users.find(x => x.username === u && x.password === p);
            if(found) loadSession(found);
            else alert("Account not found!");
        }

        function loadSession(user) {
            activeUser = user;
            openScreen('app-screen');
            document.getElementById('auth-nav').classList.add('hidden');
            document.getElementById('user-nav').classList.remove('hidden');
            document.getElementById('my-num-btn').innerText = `${user.phone} (Sign Out)`;
            renderContacts();
            renderChat();
        }

        function addContact() {
            const num = document.getElementById('add-phone').value;
            if(num === activeUser.phone) {
                notify("Don't Put Your Number In Silly!", "#ffcc00");
                return;
            }
            const exists = ballingData.users.find(u => u.phone === num);
            if(exists) {
                activeUser.contacts.push({ phone: exists.phone, name: exists.username });
                saveCloud();
                notify("Contact Saved!", "#4caf50");
                closePop();
                renderContacts();
            } else {
                notify("Not A Real Number", "#ff4d4d");
            }
        }

        function renderContacts() {
            const list = document.getElementById('contacts-list');
            list.innerHTML = "";
            if(activeUser.contacts.length > 0) {
                activeUser.contacts.forEach(c => {
                    const div = document.createElement('div');
                    div.className = "contact-entry";
                    div.innerHTML = `<button class="contact-btn-wide">${c.phone}</button><br><small>${c.name}</small>`;
                    list.appendChild(div);
                });
            } else {
                list.innerHTML = `<p style="text-align: center; color: #999;">You Don't Have Any Contacts!</p>`;
            }
        }

        function sendGlobal() {
            const input = document.getElementById('chat-msg');
            if(!input.value) return;
            ballingData.messages.push({ user: activeUser.username, text: input.value });
            saveCloud();
            input.value = "";
            renderChat();
        }

        function renderChat() {
            const box = document.getElementById('global-chat-box');
            box.innerHTML = ballingData.messages.map(m => `
                <div class="msg"><strong>${m.user}:</strong> ${m.text}</div>
            `).join('');
            box.scrollTop = box.scrollHeight;
        }

        function showAddPopup() { document.getElementById('overlay').style.display = 'flex'; document.getElementById('add-pop').style.display = 'block'; }
        function closePop() { document.getElementById('overlay').style.display = 'none'; }
        function logout() { location.reload(); }

        // Multi-device sync simulation (Auto-refresh)
        setInterval(() => {
            ballingData = JSON.parse(localStorage.getItem('balling_cloud')) || ballingData;
            if(activeUser) renderChat();
        }, 1000);
    </script>
</body>
</html>
